const i18n = {
    vi: {
        filter: {
            lesson: "B√†i h·ªçc",
            letter: "Ki·ªÉu ch·ªØ",
            AOQ: `S·ªë l∆∞·ª£ng c√¢u h·ªèi`,
            cancelBtn: `Ch·ªçn l·∫°i`,
            submitBtn: `L√†m b√†i`,
        },

        filterTabs: {
            vocab: `T·ª´ v·ª±ng`,
            grammar: `Ng·ªØ ph√°p`,
        },

        quiz: {
            submitBtn: `N·ªôp b√†i`,
            delete: `X√≥a`,
        },

        allowLessVocabModal: {
            text: `Ph·∫°m vi ( b√†i h·ªçc ho·∫∑c ch·ªØ ) b·∫°n ƒë√£ ch·ªçn ƒë·ªß ƒë·ªÉ ƒë√°p ·ª©ng s·ªë l∆∞·ª£ng c√¢u h·ªèi `,
            continue: `Ti·∫øp t·ª•c`,
            stay: `ƒêi·ªÅu ch·ªânh`,
        },

        noteModal: {
            html: `
                <p class="lychiExamNote__header">H∆∞·ªõng d·∫´n s·ª≠ d·ª•ng !!</p>
                <p class="lychiExamNote__h1">
                    N·ªëi c√°c ch·ªØ c√°i hiragana & katakana th√†nh t·ª´ v·ª±ng t∆∞∆°ng ·ª©ng
                </p>

                <p class="lychiExamNote__subtitle">L∆∞u √Ω b√†i t·∫≠p t·ª´ v·ª±ng</p>
                <ul class="lychiExamNote__list">
                    <li class= "lychiExamNote__item" >
                        V·ªõi t·ª´ c√≥ nhi·ªÅu c√°ch ƒë·ªçc ch·ªâ c·∫ßn ƒëi·ªÅn c√°ch ƒë·ªçc g·ªëc
                        <span>v√≠ d·ª• : ph√∫t(ÂàÜ) c√≥ ƒë√°p √°n l√† „Åµ„Çì</span>
                    </li>
                    <li class= "lychiExamNote__item" >ƒê·ªông t·ª´ lu√¥n ·ªü th·ªÉ „Åæ„Åô</li>
                </ul>
            `,
            understand: `ƒê√£ hi·ªÉu ~`,
        },

        showResults: {
            replay: `Ti·∫øp t·ª•c h·ªçc`,
            rest: `Ngh·ªâ ng∆°i !`,
        },

        landing: {
            nextBtn: `L√†m b√†i t·∫≠p`,
            or: `‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ho·∫∑c t√¨m hi·ªÉu  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ`,
            articleHtml: `
            
                        <h1 class="section-title">B√ç M·∫¨T B·ªò N√ÉO NGUY√äN TH·ª¶Y</h1>

                        <div class="card">
                            <h2 class="card-header">
                                <h2 class="card-title">
                                    üóëÔ∏è T·∫°i sao ch√∫ng ta Qu√™n?
                                </h2>
                            </h2>
                            <p class="card-text">
                                <strong>B·∫£n ch·∫•t:</strong> Qu√™n l√† c√°ch n√£o b·ªô
                                "d·ªçn r√°c" ƒë·ªÉ t·ªëi ∆∞u nƒÉng l∆∞·ª£ng cho sinh t·ªìn.
                            </p>
                            <p class="card-text">
                                <strong>C∆° ch·∫ø "L·ªçc d·ªØ li·ªáu":</strong> Trong t·ª±
                                nhi√™n, n√£o b·ªô coi th√¥ng tin kh√¥ng ƒëe d·ªça ho·∫∑c
                                kh√¥ng mang l·∫°i l·ª£i √≠ch l√† "ti·∫øng ·ªìn". N√≥ th·ª±c
                                hi·ªán qu√° tr√¨nh
                                <span class="highlight"
                                    >C·∫Øt t·ªâa th·∫ßn kinh (Synaptic Pruning)</span
                                >
                                ‚Äî c·∫Øt b·ªè nh·ªØng con ƒë∆∞·ªùng m√≤n kh√¥ng ai ƒëi l·∫°i.
                            </p>
                            <div class="example-box">
                                <span class="example-title"
                                    >ü¶¥ V√≠ d·ª• th·ªùi nguy√™n th·ªßy:</span
                                >
                                M·ªôt ng∆∞·ªùi ti·ªÅn s·ª≠ s·∫Ω nh·ªõ ch√≠nh x√°c
                                <span class="highlight"
                                    >v·ªã tr√≠ hang ·ªï c·ªßa con h·ªï</span
                                >
                                (v√¨ li√™n quan ƒë·∫øn s·ªëng ch·∫øt), nh∆∞ng s·∫Ω qu√™n ngay
                                h√¨nh d√°ng ƒë√°m m√¢y tr√¥i qua ng√†y h√¥m qua (d·ªØ li·ªáu
                                r√°c, kh√¥ng gi√∫p no b·ª•ng).
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <span class="icon">‚è≥</span>
                                <h2 class="card-title">
                                    Kh·∫£ nƒÉng ghi nh·ªõ trung b√¨nh
                                </h2>
                            </div>
                            <p class="card-text">
                                <strong>Quy lu·∫≠t:</strong> Tr√≠ nh·ªõ c√≥ "h·∫°n s·ª≠
                                d·ª•ng" ng·∫Øn h∆°n b·∫°n nghƒ©. N·∫øu kh√¥ng c√≥ t√°c ƒë·ªông,
                                th√¥ng tin s·∫Ω b·ªëc h∆°i r·∫•t nhanh (ƒê∆∞·ªùng cong
                                Ebbinghaus):
                            </p>

                            <div class="stat-container">
                                <div class="stat-row">
                                    <span>Sau 20 ph√∫t</span>
                                    <span>C√≤n 58%</span>
                                </div>
                                <div class="progress-bar">
                                    <div
                                        class="progress-fill"
                                        style="width: 58%"
                                    ></div>
                                </div>

                                <div class="stat-row">
                                    <span>Sau 1 ng√†y</span> <span>C√≤n 33%</span>
                                </div>
                                <div class="progress-bar">
                                    <div
                                        class="progress-fill"
                                        style="width: 33%"
                                    ></div>
                                </div>

                                <div class="stat-row">
                                    <span>Sau 1 th√°ng</span>
                                    <span>C√≤n 21%</span>
                                </div>
                                <div class="progress-bar">
                                    <div
                                        class="progress-fill"
                                        style="width: 21%"
                                    ></div>
                                </div>
                            </div>

                            <ul class="bullet-points card-text">
                                <li>
                                    <strong>Nh·ªõ S√¢u:</strong> Khi th√¥ng tin g·∫Øn
                                    li·ªÅn v·ªõi
                                    <span class="highlight">C·∫£m x√∫c m·∫°nh</span>
                                    (S·ª£ h√£i, sung s∆∞·ªõng).
                                </li>
                                <li>
                                    <strong>Nh·ªõ N√¥ng:</strong> Khi th√¥ng tin l·∫∑p
                                    l·∫°i nh√†m ch√°n, thi·∫øu li√™n k·∫øt.
                                </li>
                            </ul>

                            <div class="example-box">
                                <span class="example-title"
                                    >üî• V√≠ d·ª• th·ª±c t·∫ø:</span
                                >
                                B·∫°n s·∫Ω nh·ªõ c·∫£ ƒë·ªùi c·∫£m gi√°c l·∫ßn ƒë·∫ßu ti√™n
                                <span class="highlight">ch·∫°m tay v√†o l·ª≠a</span>
                                (ƒêau = Nh·ªõ s√¢u). Nh∆∞ng b·∫°n s·∫Ω qu√™n ngay ti·∫øng l√°
                                r∆°i x√†o x·∫°c trong r·ª´ng v√¨ n√≥ qu√° b√¨nh th∆∞·ªùng
                                (Kh√¥ng c·∫£m x√∫c = Nh·ªõ n√¥ng).
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <span class="icon">üõ†Ô∏è</span>
                                <h2 class="card-title">
                                    C√°ch c·∫£i thi·ªán (Bi·∫øn N√¥ng th√†nh S√¢u)
                                </h2>
                            </div>
                            <p class="card-text">
                                <strong>Nguy√™n l√Ω:</strong> "ƒê√°nh l·ª´a" b·ªô n√£o
                                r·∫±ng ƒë√¢y l√† th√¥ng tin quan tr·ªçng s·ªëng c√≤n.
                            </p>

                            <h3 style="font-size: 1.8rem; margin: 20px 0 25px">
                                1. Li√™n k·∫øt & K·ªÉ chuy·ªán (M√£ h√≥a)
                            </h3>
                            <p class="card-text">
                                N√£o ng∆∞·ªùi kh√¥ng ti·∫øn h√≥a ƒë·ªÉ nh·ªõ m·∫∑t ch·ªØ, n√≥ ti·∫øn
                                h√≥a ƒë·ªÉ nh·ªõ kh√¥ng gian v√† s·ª± ki·ªán. H√£y g·∫Øn ki·∫øn
                                th·ª©c m·ªõi v√†o nh·ªØng th·ª© c≈© ƒë√£ bi·∫øt r√µ.
                            </p>
                            <div
                                class="example-box"
                                style="margin: 20px 0 25px"
                            >
                                <span class="example-title"
                                    >üóø V√≠ d·ª• ƒë·ªùi s·ªëng:</span
                                >
                                V√≠ d·ª•: Khi t√¨m ngu·ªìn n∆∞·ªõc, th·ª£ sƒÉn kh√¥ng ch·ªâ t√¨m
                                "n∆∞·ªõc". H·ªç t√¨m "M√†u xanh m∆∞·ªõt" gi·ªØa v√πng ƒë·∫•t kh√¥
                                c·∫±n. N√£o b·ªô li√™n k·∫øt m√†u xanh v·ªõi s·ª± s·ªëng, khi·∫øn
                                b·∫°n c√≥ th·ªÉ ph√°t hi·ªán m·ªôt l√πm c√¢y t∆∞∆°i t·ªët t·ª´
                                kho·∫£ng c√°ch h√†ng c√¢y s·ªë.
                            </div>

                            <h3 style="font-size: 1.8rem; margin: 20px 0 25px">
                                2. T·∫°o √°p l·ª±c truy xu·∫•t (Active Recall)
                            </h3>
                            <p class="card-text">
                                Thay v√¨ ch·ªâ n·∫°p v√†o (ƒë·ªçc), h√£y t·∫≠p l·∫•y ra (nh·ªõ
                                l·∫°i). Vi·ªác b·∫°n ph·∫£i "l·ª•c l·ªçi" trong ƒë·∫ßu khi·∫øn b·ªô
                                n√£o ph·∫£i gia c·ªë l·∫°i con ƒë∆∞·ªùng m√≤n th·∫ßn kinh.
                            </p>
                            <div class="example-box">
                                <span class="example-title"
                                    >üèπ V√≠ d·ª• sƒÉn b·∫Øn:</span
                                >
                                Khi ƒëi l·∫°c trong r·ª´ng, thay v√¨ nh√¨n b·∫£n ƒë·ªì ngay
                                l·∫≠p t·ª©c, h√£y th·ª≠ t·ª± h·ªèi:
                                <em
                                    >"L√∫c n√£y m√¨nh r·∫Ω ·ªü g·ªëc c√¢y to hay t·∫£ng
                                    ƒë√°?"</em
                                >. Vi·ªác c·ªë g·∫Øng nh·ªõ l·∫°i con ƒë∆∞·ªùng ƒëi gi√∫p kh·∫£
                                nƒÉng ƒë·ªãnh h∆∞·ªõng c·ªßa b·∫°n s·∫Øc b√©n h∆°n nhi·ªÅu so v·ªõi
                                vi·ªác ph·ª• thu·ªôc ho√†n to√†n v√†o c√¥ng c·ª•.
                            </div>
                        </div>
                    <div class="card-learn-more">
                        <button class="card-learn-more-btn">Xem th√™m</button>
                    </div>
            
            
            `,
        },
    },
    en: {
        filter: {
            lesson: "Lesson range",
            letter: "Character type",
            AOQ: `Number of vocabulary words`,
            cancelBtn: `Reset`,
            submitBtn: `Submit`,
        },

        filterTabs: {
            vocab: `Vocabulary`,
            grammar: `Grammarly`,
        },

        quiz: {
            submitBtn: `Submit`,
            delete: `Delete`,
        },

        allowLessVocabModal: {
            text: "Your current (lesson or character) selections are sufficient for the requested number of questions.",
            continue: "Continue",
            stay: "Adjust selection",
        },

        noteModal: {
            html: `
                <p class="lychiExamNote__header">Instructions for Use!!</p>
                <p class="lychiExamNote__h1">
                    Connect the letters hiragana & katakana to form the corresponding vocabulary words.
                </p>

                <p class="lychiExamNote__subtitle">Note the vocabulary exercises</p>
                <ul class="lychiExamNote__list">
                    <li class= "lychiExamNote__item" >
                        For words with multiple readings, only enter the original/basic reading
                        <span>Example: ‚Äúminute‚Äù (ÂàÜ) ‚Üí correct answer is „Åµ„Çì</span>
                    </li>
                    <li class= "lychiExamNote__item" >Verbs must always be in the „Åæ„Åô-form</li>
                </ul>
            `,
            understand: `Got it ~ `,
        },

        showResults: {
            replay: `Play again`,
            rest: `Take a rest !`,
        },

        landing: {
            nextBtn: `Let's go`,
            or: ` ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ or learn more ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ`,
            articleHtml: `
            <h1 class="section-title">SECRETS OF THE PRIMAL BRAIN</h1>

        <div class="card">
            <div class="card-header">
                <span class="icon">üóëÔ∏è</span>
                <h2 class="card-title">Why Do We Forget?</h2>
            </div>
            <p class="card-text">
                <strong>The Essence:</strong> Forgetting is the brain's "trash collection" system to optimize energy for survival.
            </p>
            <p class="card-text">
                <strong>The "Data Filter" Mechanism:</strong> In nature, the brain treats non-threatening or useless information as "noise." It performs <span class="highlight">Synaptic Pruning</span>‚Äîliterally cutting off neural pathways that aren't walked upon.
            </p>
            <div class="example-box">
                <span class="example-title">ü¶¥ Primal Example:</span>
                A caveman remembers the exact location of a <span class="highlight">tiger's den</span> (survival critical), but instantly forgets the shape of a cloud he saw yesterday (useless noise).
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <span class="icon">‚è≥</span>
                <h2 class="card-title">Average Memory Retention</h2>
            </div>
            <p class="card-text">
                <strong>The Rule:</strong> Memory has a shorter "expiration date" than you think. Without reinforcement, information evaporates rapidly (The Ebbinghaus Curve):
            </p>
            
            <div class="stat-container">
                <div class="stat-row"><span>After 20 mins</span> <span>58% retained</span></div>
                <div class="progress-bar"><div class="progress-fill" style="width: 58%"></div></div>
                
                <div class="stat-row"><span>After 1 day</span> <span>33% retained</span></div>
                <div class="progress-bar"><div class="progress-fill" style="width: 33%"></div></div>

                <div class="stat-row"><span>After 1 month</span> <span>21% retained</span></div>
                <div class="progress-bar"><div class="progress-fill" style="width: 21%"></div></div>
            </div>

            <ul class="bullet-points card-text">
                <li><strong>Deep Memory:</strong> Information tied to <span class="highlight">High Emotion</span> (Fear, Joy).</li>
                <li><strong>Shallow Memory:</strong> Information learned via boring repetition with no context.</li>
            </ul>

            <div class="example-box">
                <span class="example-title">üî• Real-life Example:</span>
                You will remember the pain of <span class="highlight">touching fire</span> for a lifetime (Pain = Deep). But you will forget the sound of wind rustling leaves immediately (Neutral = Shallow).
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <span class="icon">üõ†Ô∏è</span>
                <h2 class="card-title">How to Improve (Deepen the Path)</h2>
            </div>
            <p class="card-text">
                <strong>The Principle:</strong> "Trick" the brain into believing this information is critical for survival.
            </p>

            <h3 style="font-size: 1.6rem; margin: 20px 0 25px; color: var(--primary-color);">1. Association & Storytelling (Encoding)</h3>
            <p class="card-text">
                The human brain didn't evolve to read text; it evolved to remember spaces and events. Anchor new knowledge to old things you already know.
            </p>
            <div class="example-box" style="margin: 20px 0 25px;">
                <span class="example-title">üóø Real-life Example:</span>
                You meet a stranger named <strong>"Leo"</strong>. Instead of muttering his name, imagine him with a thick mane, roaring like a <span class="highlight">Lion</span>. That visual image sticks instantly, whereas the abstract sound "Leo" fades.
            </div>

            <h3 style="font-size: 1.6rem; margin: 20px 0 15px; color: var(--primary-color);">2. Active Recall (The Retrieval Struggle)</h3>
            <p class="card-text">
                Instead of just inputting (reading), force yourself to output (recall). The "struggle" to find the answer reinforces the neural pathway.
            </p>
            <div class="example-box">
                <span class="example-title">üèπ Survival Example:</span>
                When lost in the woods, instead of checking the map immediately, ask yourself: <em>"Did I turn at the big oak tree or the river?"</em> forcing your brain to remember the path makes your navigation skills far sharper than relying on a tool.
            </div>
        </div>
        <div class="card-learn-more">
            <button class="card-learn-more-btn">Learn more</button>
        </div>
        
        `,
        },
    },
};

function lh(section, key) {
    let lang = document.documentElement.getAttribute(`lang`);
    return i18n[lang][section][key];
}

function initLang() {
    const initLang = localStorage.getItem("lang");

    if (!initLang) {
        let lang = document.documentElement.getAttribute(`lang`);
        localStorage.setItem("lang", lang);
    } else {
        document.documentElement.setAttribute(`lang`, initLang);
    }
    return initLang;
}
initLang();

function setLanguage(lang) {
    localStorage.setItem("lang", lang);
}

// function setLanguageOnclick(e) {
//     const langBar = e.target.closest(".langSet__item");
//     const value = langBar.getAttribute(`data-langset`);
//     document.documentElement.setAttribute(`lang`, value);
//     setLanguage(value);
// }

// allowLessVocabModal

//=================
// theme

function initTheme() {
    const initTheme = localStorage.getItem("theme");
    if (!initTheme) {
        let theme = document.documentElement.classList.contains(`light`);
        localStorage.setItem("theme", theme);
    } else {
        document.documentElement.classList.add(initTheme);
    }
}
initTheme();

function setTheme(theme) {
    localStorage.setItem("theme", theme);
}

function getHeaderLang() {
    return document.documentElement.getAttribute(`lang`);
}
